{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-17T06:46:27.045Z"}
{"level":"error","message":"ApiError: Name is required","stack":"ApiError: Name is required\n    at register (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/authController.js:11:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at middleware (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T06:52:43.143Z"}
{"level":"error","message":"ApiError: Name is required","stack":"ApiError: Name is required\n    at register (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/authController.js:11:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at middleware (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T06:52:53.215Z"}
{"level":"error","message":"ApiError: Name is required","stack":"ApiError: Name is required\n    at register (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/authController.js:11:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at middleware (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T06:53:30.270Z"}
{"level":"error","message":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)","stack":"SyntaxError: Expected property name or '}' in JSON at position 1 (line 1 column 2)\n    at JSON.parse (<anonymous>)\n    at parse (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/types/json.js:92:19)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:238:16)\n    at done (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-17T06:54:26.511Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T06:56:21.700Z"}
{"level":"error","message":"PayloadTooLargeError: request entity too large","stack":"PayloadTooLargeError: request entity too large\n    at readStream (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:163:17)\n    at getRawBody (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:116:12)\n    at read (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/read.js:79:3)\n    at jsonParser (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/types/json.js:138:5)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:328:13)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-03-17T07:03:50.311Z"}
{"level":"error","message":"PayloadTooLargeError: request entity too large","stack":"PayloadTooLargeError: request entity too large\n    at readStream (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:163:17)\n    at getRawBody (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:116:12)\n    at read (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/read.js:79:3)\n    at jsonParser (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/types/json.js:138:5)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:328:13)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/helmet/index.cjs:537:6)","timestamp":"2025-03-17T07:05:48.057Z"}
{"level":"error","message":"SyntaxError: Unexpected token '-', \"----------\"... is not valid JSON","stack":"SyntaxError: Unexpected token '-', \"----------\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at createStrictSyntaxError (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/types/json.js:169:10)\n    at parse (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/types/json.js:86:15)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:211:14)\n    at invokeCallback (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:238:16)\n    at done (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)","timestamp":"2025-03-17T07:08:29.736Z"}
{"level":"error","message":"ApiError: Title is required","stack":"ApiError: Title is required\n    at uploadDocument (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/documentController.js:16:7)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at middleware (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T07:08:55.902Z"}
{"documentId":"67d7cb7fac9003296682ee6e","error":{},"level":"error","message":"Error creating vector store: Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: Cannot find package 'hnswlib-node' imported from /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs","timestamp":"2025-03-17T07:13:08.669Z"}
{"documentId":"67d7cb7fac9003296682ee6e","error":{},"level":"error","message":"Error processing document: Could not import hnswlib-node. Please install hnswlib-node as a dependency with, e.g. `npm install -S hnswlib-node`.\n\nError: Cannot find package 'hnswlib-node' imported from /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/@langchain/community/dist/vectorstores/hnswlib.cjs","timestamp":"2025-03-17T07:13:08.669Z"}
{"level":"error","message":"ApiError: Document is not ready for chat","stack":"ApiError: Document is not ready for chat\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:25:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T07:21:10.615Z"}
{"level":"error","message":"ApiError: Document is not ready for chat","stack":"ApiError: Document is not ready for chat\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:25:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T07:28:44.991Z"}
{"level":"error","message":"ApiError: Document is not ready for chat","stack":"ApiError: Document is not ready for chat\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:25:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T07:29:03.097Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:30:06.224Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:30:08.631Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:30:46.848Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:30:47.913Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:30:48.415Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:45:25.296Z"}
{"level":"error","message":"ApiError: Invalid token","stack":"ApiError: Invalid token\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:27:18)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:47:27.090Z"}
{"level":"error","message":"ApiError: Authentication required","stack":"ApiError: Authentication required\n    at auth (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/middleware/auth.js:13:19)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-03-17T08:55:22.276Z"}
{"level":"error","message":"TypeError: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:33:59)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T09:40:10.310Z"}
{"level":"error","message":"TypeError: Cannot read properties of undefined (reading 'forEach')","stack":"TypeError: Cannot read properties of undefined (reading 'forEach')\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:37:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T09:41:24.609Z"}
{"level":"error","message":"TypeError: Cannot read properties of undefined (reading 'forEach')","stack":"TypeError: Cannot read properties of undefined (reading 'forEach')\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:38:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T09:42:07.966Z"}
{"level":"error","message":"TypeError: Cannot read properties of undefined (reading 'messages')","stack":"TypeError: Cannot read properties of undefined (reading 'messages')\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:38:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T09:57:23.482Z"}
{"level":"error","message":"TypeError: Cannot read properties of undefined (reading 'forEach')","stack":"TypeError: Cannot read properties of undefined (reading 'forEach')\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:47:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T09:57:54.804Z"}
{"level":"error","message":"TypeError: currentUser.messages is not iterable","stack":"TypeError: currentUser.messages is not iterable\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:71:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T10:08:01.940Z"}
{"level":"error","message":"CastError: Cast to embedded failed for value \"{\n  name: 'what is ego',\n  messages: [\n    'what is ego',\n    'The ego is first and foremost a bodily ego, a projection of the surface of the body. It represents reason, common sense, and the reality principle in contrast to the id, which contains the passions. The ego ideal is a substitute for a longing for the father and contains the germ from which religions have evolved. It plays a role in moral censorship and the sense of guilt.'\n  ]\n}\" (type Object) at path \"messages\" because of \"CastError\"","stack":"CastError: Cast to embedded failed for value \"{\n  name: 'what is ego',\n  messages: [\n    'what is ego',\n    'The ego is first and foremost a bodily ego, a projection of the surface of the body. It represents reason, common sense, and the reality principle in contrast to the id, which contains the passions. The ego ideal is a substitute for a longing for the father and contains the germ from which religions have evolved. It plays a role in moral censorship and the sense of guilt.'\n  ]\n}\" (type Object) at path \"messages\" because of \"CastError\"\n    at SchemaDocumentArray.cast (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/schema/documentArray.js:502:19)\n    at SchemaType.applySetters (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at castUpdateVal (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/helpers/query/castUpdate.js:626:21)\n    at walkUpdatePath (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/helpers/query/castUpdate.js:433:24)\n    at castUpdate (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/helpers/query/castUpdate.js:144:7)\n    at model.Query._castUpdate (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/query.js:4703:10)\n    at model.Query._updateThunk (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/query.js:3896:25)\n    at model.Query._updateOne (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/query.js:3984:23)\n    at model.Query.exec (/Users/noelwilliams/Documents/projects/ai/ragAPI/node_modules/mongoose/lib/query.js:4456:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T10:32:23.735Z"}
{"level":"error","message":"TypeError: chatHistory.length is not a function","stack":"TypeError: chatHistory.length is not a function\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:29:96)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T10:42:15.824Z"}
{"level":"error","message":"TypeError: chatHistory.length is not a function","stack":"TypeError: chatHistory.length is not a function\n    at chat (/Users/noelwilliams/Documents/projects/ai/ragAPI/src/controllers/chatController.js:29:96)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-03-17T10:42:37.789Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T05:23:22.520Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T05:26:43.915Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T05:27:21.205Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T05:28:09.329Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T06:10:28.166Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T06:12:19.049Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T07:08:18.814Z"}
{"level":"error","message":"Error connecting to MongoDB:","timestamp":"2025-03-18T07:09:19.452Z"}
